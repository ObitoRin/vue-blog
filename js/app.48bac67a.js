(function(e){function t(t){for(var r,a,s=t[0],i=t[1],c=t[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);f&&f(t);while(d.length)d.shift()();return u.push.apply(u,c||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(r=!1)}r&&(u.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},u=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-36791dc2":"42b84226","chunk-3ee5d95a":"51ec7e0f","chunk-4225dfcb":"e3d79dd0","chunk-52f125b5":"c33cdf44","chunk-5e4e0017":"a51310d2","chunk-686f9d34":"255a9f40","chunk-74edd716":"e0e62f4f","chunk-a056224e":"ea878f43"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-36791dc2":1,"chunk-3ee5d95a":1,"chunk-4225dfcb":1,"chunk-52f125b5":1,"chunk-5e4e0017":1,"chunk-686f9d34":1,"chunk-74edd716":1,"chunk-a056224e":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-36791dc2":"106fac3e","chunk-3ee5d95a":"ec1556fb","chunk-4225dfcb":"5afbb201","chunk-52f125b5":"9a19b35b","chunk-5e4e0017":"3ec2d2f4","chunk-686f9d34":"2a528953","chunk-74edd716":"d3cf79a4","chunk-a056224e":"f691b1f8"}[e]+".css",o=i.p+r,u=document.getElementsByTagName("link"),s=0;s<u.length;s++){var c=u[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){c=d[s],l=c.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,u=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=r,delete a[e],f.parentNode.removeChild(f),n(u)},f.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var u=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=u);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=s(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/vue-blog/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1170:function(e,t,n){},2395:function(e,t,n){},"2b7c":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("bc3a"),a=n.n(r),o=n("5c96");function u(e,t="GET",n={}){return new Promise((r,u)=>{let s={url:e,method:t};"get"===t.toLowerCase()?s.params=n:s.data=n,a()(s).then(e=>{console.log(e.data),"ok"===e.data.status?r(e.data):(o["Message"].error(e.data.msg),u(e.data))}).catch(e=>{o["Message"].error("网络异常"),u({msg:"网络异常"})})})}a.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.a.defaults.baseURL="https://blog-server.hunger-valley.com",a.a.defaults.withCredentials=!0},"4ae9":function(e,t,n){"use strict";var r=n("1170"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header",{attrs:{id:"header"}}),n("main",{attrs:{id:"main"}},[n("router-view")],1),n("Footer",{attrs:{id:"footer"}})],1)},o=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{class:{login:e.isLogin,"no-login":!e.isLogin}},[e.isLogin?e._e():[n("h1",[e._v("Let's share")]),n("p",[e._v("精品博客汇聚")]),n("div",{staticClass:"btns"},[n("router-link",{attrs:{to:"/login"}},[n("el-button",[e._v("立即登录")])],1),n("router-link",{attrs:{to:"/register"}},[n("el-button",[e._v("注册账号")])],1)],1)],e.isLogin?[n("h1",[n("router-link",{attrs:{to:"/"}},[e._v("Let's share")])],1),n("router-link",{attrs:{to:"/create"}},[n("i",{staticClass:"edit el-icon-plus"})]),n("div",{staticClass:"user"},[n("img",{staticClass:"avatar",attrs:{src:e.user.avatar,alt:e.user.username,title:e.user.username}}),n("ul",[n("li",[n("router-link",{attrs:{to:"/my"}},[e._v("我的")])],1),n("li",[n("a",{attrs:{href:"#"},on:{click:e.onLogout}},[e._v("注销")])])])])]:e._e()],2)},s=[],i=n("2f62"),c={data(){return{}},computed:{...Object(i["c"])(["user","isLogin"])},created(){this.checkLogin()},methods:{...Object(i["b"])(["checkLogin","logout"]),onLogout(){this.logout()}}},l=c,d=(n("e5e8"),n("2877")),f=Object(d["a"])(l,u,s,!1,null,"d64f673a",null),h=f.exports,p=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},g=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",[n("p",[e._v("多人共享博客")])])}],m=(n("4ae9"),{}),b=Object(d["a"])(m,p,g,!1,null,"0d4ab91e",null),v=b.exports,k={name:"App",components:{Header:h,Footer:v}},w=k,L=(n("7c55"),Object(d["a"])(w,a,o,!1,null,null,null)),y=L.exports,O=n("8c4f"),_=n("2b7c");const j={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"};var E={register({username:e,password:t}){return Object(_["a"])(j.REGISTER,"POST",{username:e,password:t})},login({username:e,password:t}){return Object(_["a"])(j.LOGIN,"POST",{username:e,password:t})},logout(){return Object(_["a"])(j.LOGOUT)},getInfo(){return Object(_["a"])(j.GET_INFO)}};const T={user:null,isLogin:!1},C={user:e=>e.user,isLogin:e=>e.isLogin},P={setUser(e,t){e.user=t.user},setLogin(e,t){e.isLogin=t.isLogin}},S={login({commit:e},{username:t,password:n}){return E.login({username:t,password:n}).then(t=>{e("setUser",{user:t.data}),e("setLogin",{isLogin:!0})})},async register({commit:e},{username:t,password:n}){let r=await E.register({username:t,password:n});return e("setUser",{user:r.data}),e("setLogin",{isLogin:!0}),r.data},async checkLogin({commit:e,state:t}){if(t.isLogin)return!0;let n=await E.getInfo();return e("setLogin",{isLogin:n.isLogin}),!!n.isLogin&&(e("setUser",{user:n.data}),!0)},async logout({commit:e}){await E.logout(),e("setUser",{user:null}),e("setLogin",{isLogin:!1})}};var I={state:T,getters:C,mutations:P,actions:S};const x={},A={},G={},M={};var N={state:x,getters:A,mutations:G,actions:M};r["default"].use(i["a"]);var U=new i["a"].Store({modules:{auth:I,blog:N}});r["default"].use(O["a"]);const q=new O["a"]({routes:[{path:"/",component:()=>n.e("chunk-52f125b5").then(n.bind(null,"64eb"))},{path:"/login",component:()=>n.e("chunk-74edd716").then(n.bind(null,"4824"))},{path:"/detail/:blogId",component:()=>n.e("chunk-36791dc2").then(n.bind(null,"fe00"))},{path:"/edit/:blogId",component:()=>n.e("chunk-686f9d34").then(n.bind(null,"ae89")),meta:{requiresAuth:!0}},{path:"/create",component:()=>n.e("chunk-a056224e").then(n.bind(null,"9ecd")),meta:{requiresAuth:!0}},{path:"/user/:userId",component:()=>n.e("chunk-3ee5d95a").then(n.bind(null,"7216"))},{path:"/my",component:()=>n.e("chunk-4225dfcb").then(n.bind(null,"bc94")),meta:{requiresAuth:!0}},{path:"/register",component:()=>n.e("chunk-5e4e0017").then(n.bind(null,"b40b"))}]});q.beforeEach((e,t,n)=>{e.matched.some(e=>e.meta.requiresAuth)?U.dispatch("checkLogin").then(t=>{t?n():n({path:"/login",query:{redirect:e.fullPath}})}):n()});var D=q,F=n("5c96"),R=n.n(F);n("0fae");function $(e){let t="object"===typeof e?e:new Date(e),n=t.getTime(),r=Date.now(),a=r-n,o="";switch(!0){case a<6e4:o="刚刚";break;case a<36e5:o=Math.floor(a/6e4)+"分钟前";break;case a<864e5:o=Math.floor(a/36e5)+"小时前";break;default:o=Math.floor(a/864e5)+"天前"}return o}var B={install(e,t){e.prototype.friendlyDate=$}};r["default"].use(R.a),r["default"].use(i["a"]),r["default"].use(B),r["default"].config.productionTip=!1,window.store=U,new r["default"]({router:D,store:U,render:function(e){return e(y)}}).$mount("#app")},"7c55":function(e,t,n){"use strict";var r=n("2395"),a=n.n(r);a.a},d488:function(e,t,n){},e5e8:function(e,t,n){"use strict";var r=n("d488"),a=n.n(r);a.a}});
//# sourceMappingURL=app.48bac67a.js.map